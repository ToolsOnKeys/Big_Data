# Scala入门1



## 1、概述

### ①、Scala和Java的关系

* jdk5.0的泛型、增强for循环、自动类型转换，都是Pizza引入的新特性。
* jdk8.0的类型推断、Lambda表达式就是从Scala引入的特性。

### ②、Scala语言特点

* Scala是一门java虚拟机为运行环境的静态类型编程语言（如java、c、c++）【动态的如js】
* Scala是一门多范式的编程语言，Scala支持面向对象和函数式编程【多范式，就是多种编程方法的意思。有面向过程、面向对象、泛型、函数式四种程序设计方法】
* Scala源代码会被编译成Java字节码（.class），然后运行于JVM之上，并可以调用现有的java类库，实现两种语言的无缝对接。
* Scala单作为一门语言来说，非常的简洁高效。
* Scala在设计时，参考了Java的设计思想，可以说Scala是源于Java，同时又有函数式编程语言的特点融合到Java中。

### ③、class和object说明

* scala是完全面向对象的，故scala去掉了Java中非面向对象的元素，如static、void等
* static
  * Scala无static关键字，由object【伴生对象，即类的静态成员】实现类似于静态方法的功能（类名.方法名）【scala在编译器处理之后，如果默认定义的是object定义类，那么生成了两个class文件，一个放普通成员，一个放静态成员；如果类使用class定义，那么之后生成一个calss文件放普通成员的】
  * class关键字和Java中的class关键字作用相同，用来定义一个类。

* void
  * 对于无返回值的函数，Scala定义器返回值类型为Unit类

### ④、概述总结

* sdk：scala的开发库【scala development kit】
* scala环境变量配置作用：可以让系统在不同的目录下可以找到scala和scalac，同时和idea工具定位scala主目录
* scala程序的编写、编译、运行步骤：.scala--->scalac编译---->.class---->scala运行----->scala 文件名
* 配置目录相关避免中文和空格

## 2、变量和数据类型

### ①、注释

* 同Java一致

### ②、变量和常量

* 变量： var i:Int=10 或 var i=10
* 常量： val j:Int=10 或 val j=10
* 注意：能用常量的地方就不要使用变量，因为常量没有修改，不需要线程安全控制。
* 声明变量时，类型可以省略，编译器自动推导，即类型推导
* 类型确定后，就不能修改了，说明scala时强制数据类型语言
* 声明变量时，必须要有初始值
* 在声明/定义一个变量时，可以使用var或者val修饰，var修饰的变量可以改变，但是val修饰的变量时不可改变的。
* var修饰的对象引用可以改变，val修饰的则不可以改变，但对象的状态确实可以改变的。

### ③、标识符的命名规范

* scala中的标识符声明，基本和Java时一致的，但是细节上会有所变化

* 首字符为字母，后续字符任意字母和数字，美元符号，可后接下划线

* 数字不可以开头

* 首字符为操作符（比如+-*/），后续字符也需跟操作符，至少一个（反编译）

* 用反引号包括的任意字符串，及时时关键字（39）也可以

* scala有39个关键字：

  ```
  package, import, class, object, trait, extends, with, type, forSome
  private, protected, abstract, sealed, final, implicit, lazy, override
  try, catch, finally, throw 
  if, else, match, case, do, while, for, return, yield
  def, val, var 
  this, super
  new
  true, false, null
  ```

* 实例

  ```
  hello    #yes
  hello12  #yes
  1hello   #no
  h-b      #no
  x h      #no
  h_4   	 #yes
  _ab      #yes
  Int      #yes
  Float    #yes
  _        #no
  Abc      #yes
  +*-      #yes
  +a       #no
  ```

### ④、字符串输出

* 字符串，通过+连接

* printf用法：字符串，通过%传值

* 字符串模板：通过$获取变量值

* 案例

  ```scala
  // 1
  printf("name="+name+",age="+age)
  // 2
  printf("name=%s,age=%d,sal=%.4f",name,age,salar)
  // 3
  printf(s"name=$name ,age=${age+1} ,sal=$sal")
  ```

### ⑤、键盘输入

* StdIn.readLine()
* StdIn.readInt()
* StdIn.readDouble()

* 案例

  ```scala
  // 1 输入姓名
  var name = StdIn.readLine()
  // 2 输入年龄
  var age = StdIn.readInt()
  // 3 输入薪水
  var sal = StdIn.readDouble()
  ```

### ⑥、数据类型

* Scala于Java有着相同的数据类型，在Scala中数据类型都是对象，也就是说Scala没有Java中的原生类型。

* Scala数据类型分为两大类AnyVal（值类型）和AnyRef（引用类型），注意：不管时AnyVal还是AnyRef都是对象。

* 相当于Java的类型系统，Scala要更复杂些，也正是这复杂多变的类型系统才让面向对象编程和函数式编程完美的融合在一起了。

  ```
  1、Scala的类型分为两大类AnyVal（值类型），AnyRef（引用类型）
  2、Scala的Any类型式根类型，是所有类的基类
  3、AnyVal主要包含是值的类型，对应Java的（int，float，double....）
  4、AnyRef引用类型，包括（集合，Java类，其他类【自定义类】）
  5、Scala有三个特别类型Unit（统一类型），只有一个实列（）
  6、Null和Nothing是（bottom class）底层类，Null只有一个实例null
  7、Nothing是所有类型的子类，他的价值是用于一个方法/函数，返回一个非正常值的场景。因为Nothing是所有类的子类，因此可以返回给任何变量或者函数。
  ```

### ⑦、整数类型（Byte【1字节】、Short【2】、Int【4】、Long【8】）

* Scala的整数类型就是用于存放整数值。
* 记忆：Byte（-128~127）
* 声明Long整型，需要在值后面加上L或l
* Scala程序中变量常声明为Int型，除非不足以标识大数，才使用Long
* MinValue即最小值，MaxValue即最大值

### ⑧、浮点类型（Float【4】、Double【8】）

* Scala的浮点型默认是Double型，如果要声明Float型，需要在后面添加f或F

### ⑨、字符类型（Char）

* 字符类型可以标识单个字符
* 字符常量是用单引号''括起来的单个字符

### ⑩、布尔类型（Boolean）

* boolean类型占用一个字节

## 3、Unit类型、Null类型和Nothing类型

* Unit：标识无值，和其他语言中的void等同。用作不返回任何结果的方法的结果类型。Unit只有一个实例值，写成（）
* Null：null，Null类型只有一个实例值null；Null类只有一个实例对象，Null类似于java中null引用。Null可以赋值给任意引用类型（AnyRef），但是不能赋值给值类型（AnyVal）
* Nothing：Nothing类型在Scala的类层级最低端；他是任何其他类型的子类型。当一个函数，我们确定没有正常的返回值，可以用Nothing来指定返回类型，这样有一个好处，就是我们可以吧返回的值（异常）付给其他的函数。

## 4、类型转换

### ①自动类型转换

* 自动提升原则：有多种类型的数据混合运算时，系统首先自动将所有数据转换成精度大的那种数据类型，然后在进行计算。
* 把精度大的数据类型赋值给进度小的数据类型时，就会报错，防止会进行自动类型转换。
* byte、short和char之间不会互相自动转换
* byte、short、char他们之间可以计算，在计算之前时先转换为int类型。

### ②、强制类型转换

* toInt、toFloat、toDouble、toByte、toLong、toShort

* 自动类型转换的逆过程，将精度大的数值转换为进度小的数值类型。使用时要加上强制转函数，但可能造成精度降低或溢出，格外要注意。
* 强制符号只针对于最近的操作数有效，往往会使用小括号提升优先级。

### ③、数值类型和String类型间的转换

* 在程序开发中，我们经常需要间基本数值类型转成String类型。或者将String类型转成基本数值类型
* 基本类型转String类型（语法：基本类型的值+“”即可）
* String类型转为基本数值类型（toInt、toFloat、toDouble、toByte、toLong、toShort）

* 注意事项：在将String类型转成基本数值类型时，要确保String类型能够转成有效的数据，比如我们可以把123转成一个整数，但是不能把hello转成一个整数。

## 5、运算符

* Scala运算符的使用和Java运算符的使用基本相同，只有个别细节上不同。

* Ⅰ、 计算运算符

  | 运算符 | 运算         | 范例       | 结果    |
  | ------ | ------------ | ---------- | ------- |
  | +      | 正号         | +3         | 3       |
  | -      | 负号         | b=4; -b    | -4      |
  | +      | 加           | 5+5        | 10      |
  | -      | 减           | 6-4        | 2       |
  | *      | 乘           | 3*4        | 12      |
  | /      | 除           | 5/5        | 1       |
  | %      | 取模（取余） | 7%5        | 2       |
  | +      | 字符串相加   | “He”+”llo” | “Hello” |

* Ⅱ、关系运算符

  | 运算符 | 运算     | 范例  | 结果  |
  | ------ | -------- | ----- | ----- |
  | ==     | 相等于   | 4==3  | false |
  | !=     | 不等于   | 4！=3 | true  |
  | <      | 小于     | 4<3   | false |
  | >      | 大于     | 4>3   | true  |
  | <=     | 小于等于 | 4<=3  | false |
  | >=     | 大于等于 | 4>=3  | true  |

* java和Scala中关于==的区别
  * java中==比较两个对象在内存中的首地址；
  * java中的equals比较字符串中所包含的内容是否相同；
  * Scala中==更加类似Java中的equals；
  * Scala中eq比较两个对象在内存中的首地址。

* Ⅲ、逻辑运算符

  | 运算符 | 描述   | 实例                        |
  | ------ | ------ | --------------------------- |
  | &&     | 逻辑与 | (A   && B) 运算结果为 false |
  | \|\|   | 逻辑或 | (A \|\| B) 运算结果为 true  |
  | !      | 逻辑非 | !(A   && B) 运算结果为 true |

* Ⅳ、赋值运算符

  | 运算符 | 描述                                           | 实例                                  |
  | ------ | ---------------------------------------------- | ------------------------------------- |
  | =      | 简单的赋值运算符，将一个表达式的值赋给一个左值 | C = A + B 将 A + B 表达式结果赋值给 C |
  | +=     | 相加后再赋值                                   | C += A 等于 C   = C + A               |
  | -=     | 相减后再赋值                                   | C -= A 等于 C = C - A                 |
  | *=     | 相乘后再赋值                                   | C *= A 等于 C   = C * A               |
  | /=     | 相除后再赋值                                   | C /= A 等于 C = C / A                 |
  | %=     | 求余后再赋值                                   | C %= A 等于 C   = C % A               |
  | <<=    | 左移后赋值                                     | C <<= 2等于 C = C << 2                |
  | >>=    | 右移后赋值                                     | C >>= 2 等于 C   = C >> 2             |
  | &=     | 按位与后赋值                                   | C &= 2  等于 C = C & 2                |
  | ^=     | 按位异或后赋值                                 | C ^= 2  等于 C = C ^ 2                |
  | \|=    | 按位或后赋值                                   | C \|= 2  等于 C = C \| 2              |

* Scala中没有++、--、?:操作符，可以通过+=、-=来实现同样的效果；?:可以用if()替换

* Ⅴ、位运算符

  | 运算符 | 描述           | 实例     |
  | ------ | -------------- | -------- |
  | &      | 按位与运算符   | (a & b)  |
  | \|     | 按位或运算符   | (a \| b) |
  | ^      | 按位异或运算符 | (a ^ b)  |
  | ~      | 按位取反运算符 | (~a )    |
  | <<     | 左移动运算符   | a << 2   |
  | >>     | 右移动运算符   | a >> 2   |
  | >>>    | 无符号右移     | A >>>2   |

* 计算机中二进制运算概念

  ```概念
  # 对于有符号而言
  1、二进制的最高位时符号位：0标识正数，1标识负数
  2、正数的原码、反码、补码一样【三码合一】
  3、负数的反码=他的原码符号位不变，其他位取反
  4、负数的补码=他的反码+1
  5、0的反码、补码都是0
  6、在计算机运算的时候，都是以补码的方式来运算的。运算后的结果，还需要转成原码才是最后结果。
  ```

## 6、Scala运算符的本质

* Scala中，其实时没有运算符的，所有的运算符都是方法
* 当调用对象的方法时，点可以省略
* 如果函数参数只有一个，或者没有参数，（）可以省略