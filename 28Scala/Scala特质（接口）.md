# Scala特质（trait）

## 1、Scala接口的介绍

* 从面向对象来看，接口并不属于面向对象的范畴，Scala是纯面向对象的语言，在Scala中，没有接口
* Scala语言中，采用trait（特质、特征）来代替接口的概念，也就是说，多个类拒用相同的特征时，就可以将这个特质独立出来，采用关键字trait声明。可以这里理解trait（Scala的特质是 抽象类+接口组合）

## 2、trait的声明

```scala
trait 特质名 {

	trait体

}
```

* 在Scala中，Java中的接口可以当作特质使用

## 3、Scala中trait的使用

* 一个欸拒用某种特质，就意味着这个类满足了这个特质的所有要素，所以在使用时，也可以采用extends关键字，如果有多个特质或存在父类，纳闷就需要采用with关键字连接

  ```scala
  # 没有父类
  class  类名   extends   特质1   with    特质2   with   特质3 ..
  # 有父类
  class  类名   extends   父类   with  特质1   with   特质2   with 特质3
  ```

## 4、特质trait的机制

* Scala提供了特质，特质可以同时拥有抽象方法和具体方法，一个类可以实现/集成多个特质
* 特质中没有实现的方法就是抽象方法。类通过extends集成特质，通过with可以集成多个特质
* 所有的Java接口都可以当作Scala特质来使用

## 5、带有特质的对象，动态混入

* 除了可以在类声明时继承特质以外，还可以在构建对象时混入特质，扩展目标类的功能
* 此种方式也可以应用于堆抽象类功能进行了扩展
* 动态混入时Scala特有的方式（Java中没有动态混入 ），可在不修改类声明/定义的情况下，扩展类的功能，非常地灵活，耦合性低
* 动态混入可以在不影响原有的继承关系的基础上，可以指定的类扩展功能

## 6、叠加特质

* 基本介绍：构建对象的同时如果混入多个特质，称之为叠加特质，那么特质声明顺序从左到右，方法执行顺序从右到左
* 叠加特质注意事项和细节：
  * 特质声明的顺序从左到右
  * Scala在执行叠加对象的方法时，会首先从后面的特质（从右向左）开始执行
  * Scala中特质中如果调用super，并不是表示调用父特质的方法，而是像前面（左边）继续查找特质，如果找不到，才回去父特质查找。
  * 如果想要调用具体特质的方法，可以指定：super[特质].xxx(...)，其中的泛型必须时该特质的直接超类类型。

## 7、扩展类的特质

* 特质可以继承类，以用来扩展该类的一些功能
* 所有混入该特质的类，会自动称为哪个特质所继承的超累的子类

* 如果混入该特质的类，已经继承了另一个类（a），则要求a类时特质超累的子类，否则就会出现了多继承现象，发生错误

## 8、自身类型

* 说明：自身类型：主要时为了解决特质的循环依赖问题，同时可以确保特质在不扩展某个类的情况下，以让可以做到限制混入该特质的类的类型，可以扩展功能